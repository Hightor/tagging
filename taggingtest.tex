% --------------------------------------------------------------
% !TEX TS-program = lualatex
% !TEX encoding = UTF-8 Unicode
% taggingtest.tex
% Copyright 2011 Brent Longborough
% --------------------------------------------------------------
% This work may be distributed and/or modified under the
% conditions of the LaTeX Project Public License, either version 1.3
% of this license or (at your option) any later version.
% The latest version of this license is in
%   http://www.latex-project.org/lppl.txt
% and version 1.3 or later is part of all distributions of LaTeX
% version 2005/12/01 or later.
%
% This work has the LPPL maintenance status `maintained'.
% The Current Maintainer of this work is Brent Longborough.
%
% This work consists of these files:
%     tagging.sty, tagging.tex, and tagging.pdf
% --------------------------------------------------------------
\documentclass[a4paper,twoside]{article}
\usepackage[a]{tagging}
\newcommand{\test}[1]{%
	\paragraph{#1:}
	\iftagged{a,b}{%
		Either (a) or (b) is active.
	}{%
		Neither (a) nor (b) is active.
	}
	\iftagged{a}{%
		(a) is active.
	}{%
		(a) is not active.
	}
	\iftagged{b}{%
		(b) is active.
	}{%
		(b) is not active.
	}
}
\begin{document}
% \usetag{a} <-- Now in package options
\test{(a) active}
\usetag{a,b}
\test{(a) and (b) active}
\droptag{a}
\test{only (b) active}

\usetag{a,b}
\paragraph{Nested a,b:}
\iftagged{a,b}{A or B}{Neither A nor B}

\tagged{a,b}{A or B}

\untagged{a,b}{Neither A nor B}

\droptag{a,b}
\paragraph{Nested neither:}
\iftagged{a,b}{A or B}{Neither A nor B}

\usetag{a,b}
\paragraph{Tagged blocks:}

\begin{taggedblock}{a}
This a block tagged (a)
\end{taggedblock}

\begin{taggedblock}{b}
This a block tagged (b)
\end{taggedblock}

\droptag{a,b}
\paragraph{Untagged blocks:}

\begin{untaggedblock}{a}
This a block untagged (a)
\end{untaggedblock}

\begin{untaggedblock}{b}
This a block untagged (b)
\end{untaggedblock}

\test{No tags}

\end{document}
